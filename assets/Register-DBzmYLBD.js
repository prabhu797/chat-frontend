import{r as n,u as v,a as j,j as t}from"./index-D89FvVy2.js";import{B as w,T as o,a as y,i as m}from"./axios-CfuOtnxI.js";const W=()=>{const[s,d]=n.useState(""),[i,c]=n.useState(""),[r,g]=n.useState(""),{login:h}=v(),p=j(),x=async a=>{var l,u;a.preventDefault();try{await m.post("/auth/register",{username:s,displayName:i,password:r}),showToast("success",e.data.message);const e=await m.post("/auth/login",{username:s,password:r});h(e.data.user,e.data.token),p("/")}catch(e){const f=((u=(l=e.response)==null?void 0:l.data)==null?void 0:u.message)||"Registration failed.";showToast("error",f)}};return t.jsx(w,{sx:{maxWidth:400,mx:"auto",mt:10},children:t.jsxs("form",{onSubmit:x,children:[t.jsx(o,{fullWidth:!0,label:"Username",value:s,onChange:a=>d(a.target.value),margin:"normal"}),t.jsx(o,{fullWidth:!0,label:"Display Name",value:i,onChange:a=>c(a.target.value),margin:"normal"}),t.jsx(o,{fullWidth:!0,label:"Password",type:"password",value:r,onChange:a=>g(a.target.value),margin:"normal"}),t.jsx(y,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:2},children:"Register"})]})})};export{W as default};
