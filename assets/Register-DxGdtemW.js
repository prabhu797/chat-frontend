import{r as o,u as j,a as w,j as e,B as y}from"./index-Be_7_VrC.js";import{T as i,B as b,i as d,s as g}from"./toast-LW00sa0M.js";const W=()=>{const[s,c]=o.useState(""),[l,h]=o.useState(""),[r,p]=o.useState(""),{login:x}=j(),f=w(),v=async a=>{var u,m;a.preventDefault();try{const n=await d.post("/auth/register",{username:s,displayName:l,password:r});g("success",n.data.message);const t=await d.post("/auth/login",{username:s,password:r});x(t.data.user,t.data.token),f("/")}catch(n){const t=((m=(u=n.response)==null?void 0:u.data)==null?void 0:m.message)||"Registration failed.";g("error",t)}};return e.jsx(y,{sx:{maxWidth:400,mx:"auto",mt:10},children:e.jsxs("form",{onSubmit:v,children:[e.jsx(i,{fullWidth:!0,label:"Username",value:s,onChange:a=>c(a.target.value),margin:"normal"}),e.jsx(i,{fullWidth:!0,label:"Display Name",value:l,onChange:a=>h(a.target.value),margin:"normal"}),e.jsx(i,{fullWidth:!0,label:"Password",type:"password",value:r,onChange:a=>p(a.target.value),margin:"normal"}),e.jsx(b,{fullWidth:!0,type:"submit",variant:"contained",sx:{mt:2},children:"Register"})]})})};export{W as default};
